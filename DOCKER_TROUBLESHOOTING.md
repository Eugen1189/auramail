# üê≥ Docker Troubleshooting Guide

## –ü—Ä–æ–±–ª–µ–º–∞: –ö–æ–Ω—Ñ–ª—ñ–∫—Ç –ø–æ—Ä—Ç—ñ–≤ Redis (6379)

### ‚úÖ –†—ñ—à–µ–Ω–Ω—è –≤–∂–µ –∑–∞—Å—Ç–æ—Å–æ–≤–∞–Ω–æ!

–£ –≤–∞—à–æ–º—É `docker-compose.yml` –≤–∂–µ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è –ø–æ—Ä—Ç—É **6380** –∑–∞–º—ñ—Å—Ç—å 6379:

```yaml
ports:
  - "${REDIS_PORT:-6380}:6379"  # –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –ø–æ—Ä—Ç 6380, –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π 6379
```

### üîç –Ø–∫—â–æ –ø–æ–º–∏–ª–∫–∞ –≤—Å–µ —â–µ –≤–∏–Ω–∏–∫–∞—î:

#### –í–∞—Ä—ñ–∞–Ω—Ç 1: –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –∑–º—ñ–Ω–Ω—É REDIS_PORT

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ –≤–∞—à `.env` —Ñ–∞–π–ª (—è–∫—â–æ –≤—ñ–Ω —î):

```bash
# –ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ REDIS_PORT –Ω–µ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –Ω–∞ 6379
REDIS_PORT=6380
```

–ê–±–æ –≤–∏–¥–∞–ª—ñ—Ç—å —Ü–µ–π —Ä—è–¥–æ–∫ –∑ `.env`, —â–æ–± –≤–∏–∫–æ—Ä–∏—Å—Ç–∞—Ç–∏ –∑–Ω–∞—á–µ–Ω–Ω—è –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º (6380).

#### –í–∞—Ä—ñ–∞–Ω—Ç 2: –ó—É–ø–∏–Ω–∏—Ç–∏ –ª–æ–∫–∞–ª—å–Ω–∏–π Redis

–Ø–∫—â–æ —É –≤–∞—Å –∑–∞–ø—É—â–µ–Ω–∏–π –ª–æ–∫–∞–ª—å–Ω–∏–π Redis –Ω–∞ Windows:

```powershell
# –ó–Ω–∞–π—Ç–∏ –ø—Ä–æ—Ü–µ—Å Redis
netstat -ano | findstr :6379

# –ó—É–ø–∏–Ω–∏—Ç–∏ –ø—Ä–æ—Ü–µ—Å (–∑–∞–º—ñ–Ω—ñ—Ç—å PID –Ω–∞ –≤–∞—à)
taskkill /PID <PID> /F

# –ê–±–æ –∑—É–ø–∏–Ω–∏—Ç–∏ —á–µ—Ä–µ–∑ —Å–ª—É–∂–±–∏ Windows
net stop Redis
```

#### –í–∞—Ä—ñ–∞–Ω—Ç 3: –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏

```bash
# –ó—É–ø–∏–Ω–∏—Ç–∏ –≤—Å—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏
docker compose down

# –í–∏–¥–∞–ª–∏—Ç–∏ —Å—Ç–∞—Ä—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
docker compose rm -f

# –ó–∞–ø—É—Å—Ç–∏—Ç–∏ –∑–Ω–æ–≤—É
docker compose up -d
```

### üîß –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—ó

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ Docker –º–µ—Ä–µ–∂—ñ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω–∏–π –ø–æ—Ä—Ç:

```yaml
# –£ docker-compose.yml –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è:
REDIS_URL=redis://redis:6379/0  # ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ - –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –ø–æ—Ä—Ç 6379
```

**–í–∞–∂–ª–∏–≤–æ:** –í—Å–µ—Ä–µ–¥–∏–Ω—ñ Docker –º–µ—Ä–µ–∂—ñ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏ –∑'—î–¥–Ω—É—é—Ç—å—Å—è —á–µ—Ä–µ–∑ –≤–Ω—É—Ç—Ä—ñ—à–Ω—ñ–π –ø–æ—Ä—Ç (6379), –∞ –∑–æ–≤–Ω—ñ—à–Ω—ñ–π –ø–æ—Ä—Ç (6380) –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—î—Ç—å—Å—è —Ç—ñ–ª—å–∫–∏ –¥–ª—è –¥–æ—Å—Ç—É–ø—É –∑ —Ö–æ—Å—Ç–∞.

### üìã –°—Ç–≤–æ—Ä–µ–Ω–Ω—è .env —Ñ–∞–π–ª—É (—Ä–µ–∫–æ–º–µ–Ω–¥–æ–≤–∞–Ω–æ)

–°—Ç–≤–æ—Ä—ñ—Ç—å `.env` —Ñ–∞–π–ª –≤ –∫–æ—Ä–µ–Ω—ñ –ø—Ä–æ–µ–∫—Ç—É:

```env
# Redis Configuration
REDIS_PORT=6380  # –ó–æ–≤–Ω—ñ—à–Ω—ñ–π –ø–æ—Ä—Ç (–º–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏ –Ω–∞ –±—É–¥—å-—è–∫–∏–π –≤—ñ–ª—å–Ω–∏–π)

# Database Configuration
DB_USER=auramail
DB_PASSWORD=your_secure_password_here
DB_NAME=auramail
DB_PORT=5432

# Web Configuration
WEB_PORT=5000
FLASK_SECRET_KEY=your_secret_key_here
GEMINI_API_KEY=your_gemini_api_key_here
DEBUG=True
BASE_URI=http://localhost:5000

# Security
FORCE_HTTPS=False
ALLOW_ALL_CORS=True
```

### üöÄ –ó–∞–ø—É—Å–∫ –ø—ñ—Å–ª—è –≤–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

```bash
# 1. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏, —â–æ –ø–æ—Ä—Ç 6380 –≤—ñ–ª—å–Ω–∏–π
netstat -ano | findstr :6380

# 2. –ó–∞–ø—É—Å—Ç–∏—Ç–∏ Docker Compose
docker compose up -d

# 3. –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏
docker compose logs -f redis
```

### ‚úÖ –û—á—ñ–∫—É–≤–∞–Ω–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ–≥–æ –∑–∞–ø—É—Å–∫—É –≤–∏ –ø–æ–≤–∏–Ω–Ω—ñ –ø–æ–±–∞—á–∏—Ç–∏:

```
‚úÖ redis container started on port 6380
‚úÖ web container connected to redis:6379 (internal)
‚úÖ worker container connected to redis:6379 (internal)
```

### üîó –ü—ñ–¥–∫–ª—é—á–µ–Ω–Ω—è –¥–æ Redis –∑ —Ö–æ—Å—Ç–∞

–Ø–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ –ø—ñ–¥–∫–ª—é—á–∏—Ç–∏—Å—è –¥–æ Redis –∑ –≤–∞—à–æ–≥–æ –∫–æ–º–ø'—é—Ç–µ—Ä–∞:

```bash
# –í–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –ø–æ—Ä—Ç 6380 (–∑–æ–≤–Ω—ñ—à–Ω—ñ–π)
redis-cli -p 6380

# –ê–±–æ —á–µ—Ä–µ–∑ Docker
docker exec -it auramail-redis redis-cli
```

### üìö –î–æ–¥–∞—Ç–∫–æ–≤—ñ –∫–æ–º–∞–Ω–¥–∏

```bash
# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ —Å—Ç–∞—Ç—É—Å –≤—Å—ñ—Ö –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ–≤
docker compose ps

# –ü–µ—Ä–µ–≤—ñ—Ä–∏—Ç–∏ –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤—ñ—Å—É
docker compose logs redis
docker compose logs web
docker compose logs worker

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–∏–π —Å–µ—Ä–≤—ñ—Å
docker compose restart redis

# –ü–µ—Ä–µ–±—É–¥—É–≤–∞—Ç–∏ –æ–±—Ä–∞–∑–∏
docker compose build --no-cache

# –û—á–∏—Å—Ç–∏—Ç–∏ –≤—Å–µ (–æ–±–µ—Ä–µ–∂–Ω–æ!)
docker compose down -v
```

---

**–Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è**, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
1. –ß–∏ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∏–π —ñ–Ω—à–∏–π Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä –Ω–∞ –ø–æ—Ä—Ç—É 6379
2. –ß–∏ –ø—Ä–∞–≤–∏–ª—å–Ω–æ –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–∏–π `.env` —Ñ–∞–π–ª
3. –ß–∏ –Ω–µ –∑–∞–±–ª–æ–∫–æ–≤–∞–Ω–∏–π –ø–æ—Ä—Ç —Ñ–∞–π—Ä–≤–æ–ª–æ–º

