# üßπ –û—á–∏—â–µ–Ω–Ω—è Redis —á–µ—Ä–≥–∏ –≤—ñ–¥ —Å—Ç–∞—Ä–∏—Ö –∑–∞–¥–∞—á

## –ü—Ä–æ–±–ª–µ–º–∞

–£ —á–µ—Ä–∑—ñ Redis –∑–∞–ª–∏—à–∏–ª–∏—Å—è —Å—Ç–∞—Ä—ñ –∑–∞–¥–∞—á—ñ, —è–∫—ñ –ø–æ—Å–∏–ª–∞—é—Ç—å—Å—è –Ω–∞ –≤–∏–¥–∞–ª–µ–Ω—É —Ñ—É–Ω–∫—Ü—ñ—é `run_task_in_context`. –¶–µ –≤–∏–∫–ª–∏–∫–∞—î –ø–æ–º–∏–ª–∫—É:

```
ValueError: Invalid attribute name: run_task_in_context
```

## –†—ñ—à–µ–Ω–Ω—è

–ó–∞–ø—É—Å—Ç—ñ—Ç—å —Å–∫—Ä–∏–ø—Ç –¥–ª—è –æ—á–∏—â–µ–Ω–Ω—è —á–µ—Ä–≥–∏:

```powershell
python clear_redis_queue.py
```

–°–∫—Ä–∏–ø—Ç:
1. –ü—ñ–¥–∫–ª—é—á–∏—Ç—å—Å—è –¥–æ Redis
2. –û—á–∏—Å—Ç–∏—Ç—å –≤—Å—ñ –∑–∞–¥–∞—á—ñ –∑ —á–µ—Ä–≥–∏ `default`
3. –û—á–∏—Å—Ç–∏—Ç—å "started" —Ç–∞ "failed" —Ä–µ—î—Å—Ç—Ä–∏
4. –ü—ñ–¥—Ç–≤–µ—Ä–¥–∏—Ç—å —É—Å–ø—ñ—à–Ω–µ –≤–∏–∫–æ–Ω–∞–Ω–Ω—è

## –ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω–∏–π –º–µ—Ç–æ–¥ (–≤—Ä—É—á–Ω—É)

–Ø–∫—â–æ —Å–∫—Ä–∏–ø—Ç –Ω–µ –ø—Ä–∞—Ü—é—î, –º–æ–∂–Ω–∞ –æ—á–∏—Å—Ç–∏—Ç–∏ —á–µ—Ä–≥—É –≤—Ä—É—á–Ω—É —á–µ—Ä–µ–∑ Python:

```python
import redis
from rq import Queue

conn = redis.from_url('redis://localhost:6379/0')
q = Queue('default', connection=conn)
q.empty()  # –û—á–∏—Å—Ç–∏—Ç–∏ —á–µ—Ä–≥—É
```

–ê–±–æ —á–µ—Ä–µ–∑ redis-cli:

```bash
redis-cli FLUSHDB
```

‚ö†Ô∏è **–£–≤–∞–≥–∞**: `FLUSHDB` –≤–∏–¥–∞–ª–∏—Ç—å –í–°–Ü –¥–∞–Ω—ñ –∑ –±–∞–∑–∏ –¥–∞–Ω–∏—Ö Redis, –Ω–µ —Ç—ñ–ª—å–∫–∏ —á–µ—Ä–≥—É RQ!

## –ü—ñ—Å–ª—è –æ—á–∏—â–µ–Ω–Ω—è

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å Worker:
   ```powershell
   python worker.py
   ```

2. –°–ø—Ä–æ–±—É–π—Ç–µ –ø–æ—Å—Ç–∞–≤–∏—Ç–∏ –Ω–æ–≤—É –∑–∞–¥–∞—á—É —á–µ—Ä–µ–∑ `/sort` –º–∞—Ä—à—Ä—É—Ç

3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ –∑–∞–¥–∞—á–∞ –æ–±—Ä–æ–±–ª—è—î—Ç—å—Å—è –±–µ–∑ –ø–æ–º–∏–ª–æ–∫

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

–ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —â–æ —á–µ—Ä–≥–∞ –ø–æ—Ä–æ–∂–Ω—è:

```python
from rq import Queue
import redis

conn = redis.from_url('redis://localhost:6379/0')
q = Queue('default', connection=conn)
print(f"Jobs in queue: {len(q)}")  # –ú–∞—î –±—É—Ç–∏ 0
```

