# Swagger/OpenAPI –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è AuraMail API

## –î–æ—Å—Ç—É–ø –¥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó

–ü—ñ—Å–ª—è –∑–∞–ø—É—Å–∫—É —Å–µ—Ä–≤–µ—Ä–∞, Swagger UI –¥–æ—Å—Ç—É–ø–Ω–∏–π –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∞–¥—Ä–µ—Å–∞–º–∏:

- **–û—Å–Ω–æ–≤–Ω–∞ –∞–¥—Ä–µ—Å–∞**: `http://localhost:5000/api-docs`
- **–ê–ª—å—Ç–µ—Ä–Ω–∞—Ç–∏–≤–Ω—ñ –∞–¥—Ä–µ—Å–∏**: 
  - `http://localhost:5000/swagger`
  - `http://localhost:5000/docs`

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ API

API –æ—Ä–≥–∞–Ω—ñ–∑–æ–≤–∞–Ω–æ –∑–∞ –Ω–∞—Å—Ç—É–ø–Ω–∏–º–∏ –∫–∞—Ç–µ–≥–æ—Ä—ñ—è–º–∏ (—Ç–µ–≥–∞–º–∏):

### üîê Authentication (–ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è)
- `GET /authorize` - –ü–æ—á–∞—Ç–æ–∫ OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ Google
- `GET /callback` - –û–±—Ä–æ–±–∫–∞ OAuth callback –≤—ñ–¥ Google
- `GET /logout` - –í–∏—Ö—ñ–¥ –∑ —Å–∏—Å—Ç–µ–º–∏
- `GET /clear-credentials` - –û—á–∏—â–µ–Ω–Ω—è OAuth credentials

### üìä Dashboard (–ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞)
- `GET /` - –ì–æ–ª–æ–≤–Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫–∞ –∑ –¥–∞—à–±–æ—Ä–¥–æ–º

### üìß Email Sorting (–°–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—Ç–∏)
- `GET /sort` - –ó–∞–ø—É—Å–∫ –∞—Å–∏–Ω—Ö—Ä–æ–Ω–Ω–æ–≥–æ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—Ç–∏
- `GET /api/progress` - –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É –æ–±—Ä–æ–±–∫–∏
- `POST /rollback/<msg_id>` - –í—ñ–¥–∫–∞—Ç –¥—ñ—ó –¥–ª—è –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ –ª–∏—Å—Ç–∞

### üì§ Export (–ï–∫—Å–ø–æ—Ä—Ç –¥–∞–Ω–∏—Ö)
- `GET /export/csv` - –ï–∫—Å–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó –¥—ñ–π —É CSV —Ñ–æ—Ä–º–∞—Ç—ñ
- `GET /export/pdf` - –ï–∫—Å–ø–æ—Ä—Ç —ñ—Å—Ç–æ—Ä—ñ—ó –¥—ñ–π —É PDF —Ñ–æ—Ä–º–∞—Ç—ñ

### üìà Analytics (–ê–Ω–∞–ª—ñ—Ç–∏–∫–∞)
- `GET /api/analytics/time-savings` - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ –µ–∫–æ–Ω–æ–º—ñ—ó —á–∞—Å—É
- `GET /api/analytics/roi` - –ê–Ω–∞–ª—ñ—Ç–∏–∫–∞ ROI (Return on Investment)
- `GET /api/analytics/chart-data` - –î–∞–Ω—ñ –¥–ª—è –≥—Ä–∞—Ñ—ñ–∫—ñ–≤

### üìã Reports (–ó–≤—ñ—Ç–∏)
- `GET /report` - –î–µ—Ç–∞–ª—å–Ω–∏–π –∑–≤—ñ—Ç –ø—Ä–æ –∞–∫—Ç–∏–≤–Ω—ñ—Å—Ç—å

### üé§ Voice Search (–ì–æ–ª–æ—Å–æ–≤–∏–π –ø–æ—à—É–∫)
- `POST /voice/search` - –ì–æ–ª–æ—Å–æ–≤–∏–π –ø–æ—à—É–∫ –ø–æ—à—Ç–∏

### üîî Follow-up (–í—ñ–¥—Å—Ç–µ–∂–µ–Ω–Ω—è –≤—ñ–¥–ø–æ–≤—ñ–¥–µ–π)
- `POST /api/sent_hook` - Hook –¥–ª—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–∏—Ö –ª–∏—Å—Ç—ñ–≤
- `POST /api/log_sent_email` - –õ–æ–≥—É–≤–∞–Ω–Ω—è –≤—ñ–¥–ø—Ä–∞–≤–ª–µ–Ω–æ–≥–æ –ª–∏—Å—Ç–∞

### üè• Health (–ü–µ—Ä–µ–≤—ñ—Ä–∫–∞ —Å—Ç–∞–Ω—É)
- `GET /health` - Health check –¥–ª—è Docker/Kubernetes

### üìä Monitoring (–ú–æ–Ω—ñ—Ç–æ—Ä–∏–Ω–≥)
- `GET /metrics` - Prometheus –º–µ—Ç—Ä–∏–∫–∏

## –ê–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è

–ë—ñ–ª—å—à—ñ—Å—Ç—å –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤ –≤–∏–º–∞–≥–∞—é—Ç—å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó —á–µ—Ä–µ–∑ Google OAuth. 

**–ü—Ä–æ—Ü–µ—Å –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó:**
1. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ `/authorize` –¥–ª—è –ø–æ—á–∞—Ç–∫—É OAuth flow
2. –ê–≤—Ç–æ—Ä–∏–∑—É–π—Ç–µ—Å—è —á–µ—Ä–µ–∑ Google
3. –ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó, credentials –∑–±–µ—Ä—ñ–≥–∞—é—Ç—å—Å—è –≤ —Å–µ—Å—ñ—ó
4. –í—Å—ñ –Ω–∞—Å—Ç—É–ø–Ω—ñ –∑–∞–ø–∏—Ç–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É—é—Ç—å credentials –∑ —Å–µ—Å—ñ—ó

**–ü—Ä–∏–º—ñ—Ç–∫–∞:** –î–ª—è —Ç–µ—Å—Ç—É–≤–∞–Ω–Ω—è API —á–µ—Ä–µ–∑ Swagger UI, —Å–ø–æ—á–∞—Ç–∫—É –Ω–µ–æ–±—Ö—ñ–¥–Ω–æ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ –±—Ä–∞—É–∑–µ—Ä, —â–æ–± —Å—Ç–≤–æ—Ä–∏—Ç–∏ —Å–µ—Å—ñ—é.

## –¢–µ—Å—Ç—É–≤–∞–Ω–Ω—è API

Swagger UI –¥–æ–∑–≤–æ–ª—è—î —Ç–µ—Å—Ç—É–≤–∞—Ç–∏ API –Ω–∞–ø—Ä—è–º—É –∑ —ñ–Ω—Ç–µ—Ä—Ñ–µ–π—Å—É:

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ `/api-docs` —É –±—Ä–∞—É–∑–µ—Ä—ñ
2. –í–∏–±–µ—Ä—ñ—Ç—å –ø–æ—Ç—Ä—ñ–±–Ω–∏–π –µ–Ω–¥–ø–æ—ñ–Ω—Ç
3. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Try it out"
4. –ó–∞–ø–æ–≤–Ω—ñ—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä–∏ (—è–∫—â–æ –ø–æ—Ç—Ä—ñ–±–Ω–æ)
5. –ù–∞—Ç–∏—Å–Ω—ñ—Ç—å "Execute"
6. –ü–µ—Ä–µ–≥–ª—è–Ω—å—Ç–µ –≤—ñ–¥–ø–æ–≤—ñ–¥—å

## –ï–∫—Å–ø–æ—Ä—Ç OpenAPI —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—ó

OpenAPI —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—è –¥–æ—Å—Ç—É–ø–Ω–∞ –∑–∞ –∞–¥—Ä–µ—Å–æ—é:
- `http://localhost:5000/apispec.json`

–¶—é —Å–ø–µ—Ü–∏—Ñ—ñ–∫–∞—Ü—ñ—é –º–æ–∂–Ω–∞ –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–≤–∞—Ç–∏ –∑:
- Postman (—ñ–º–ø–æ—Ä—Ç OpenAPI)
- Insomnia (—ñ–º–ø–æ—Ä—Ç OpenAPI)
- –Ü–Ω—à—ñ —ñ–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∏, —â–æ –ø—ñ–¥—Ç—Ä–∏–º—É—é—Ç—å OpenAPI 2.0

## –ü—Ä–∏–∫–ª–∞–¥–∏ –≤–∏–∫–æ—Ä–∏—Å—Ç–∞–Ω–Ω—è

### –ó–∞–ø—É—Å–∫ —Å–æ—Ä—Ç—É–≤–∞–Ω–Ω—è –ø–æ—à—Ç–∏
```bash
curl -X GET "http://localhost:5000/sort" \
  -H "Cookie: session=<your-session-cookie>"
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –ø—Ä–æ–≥—Ä–µ—Å—É
```bash
curl -X GET "http://localhost:5000/api/progress" \
  -H "Cookie: session=<your-session-cookie>"
```

### –û—Ç—Ä–∏–º–∞–Ω–Ω—è –∞–Ω–∞–ª—ñ—Ç–∏–∫–∏ ROI
```bash
curl -X GET "http://localhost:5000/api/analytics/roi?days=30" \
  -H "Cookie: session=<your-session-cookie>"
```

### –ì–æ–ª–æ—Å–æ–≤–∏–π –ø–æ—à—É–∫
```bash
curl -X POST "http://localhost:5000/voice/search" \
  -H "Content-Type: application/json" \
  -H "Cookie: session=<your-session-cookie>" \
  -d '{"query": "emails from John about project"}'
```

## –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è

Swagger –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—è –≤—Å—Ç–∞–Ω–æ–≤–ª—é—î—Ç—å—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–Ω–æ —Ä–∞–∑–æ–º –∑ –¥–æ–¥–∞—Ç–∫–æ–º:

```bash
pip install -r requirements.txt
```

–ë—ñ–±–ª—ñ–æ—Ç–µ–∫–∞ `flasgger` –≤–∂–µ –¥–æ–¥–∞–Ω–∞ –¥–æ `requirements.txt`.

## –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è

Swagger –Ω–∞–ª–∞—à—Ç–æ–≤–∞–Ω–æ –≤ `app_factory.py`. –ú–æ–∂–Ω–∞ –∑–º—ñ–Ω–∏—Ç–∏:
- –ù–∞–∑–≤—É API
- –û–ø–∏—Å
- –í–µ—Ä—Å—ñ—é
- –¢–µ–≥–∏ —Ç–∞ –∫–∞—Ç–µ–≥–æ—Ä—ñ—ó

## –î–æ–¥–∞–≤–∞–Ω–Ω—è –Ω–æ–≤–∏—Ö –µ–Ω–¥–ø–æ—ñ–Ω—Ç—ñ–≤

–î–ª—è –¥–æ–¥–∞–≤–∞–Ω–Ω—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—ó –¥–æ –Ω–æ–≤–æ–≥–æ –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É, –¥–æ–¥–∞–π—Ç–µ YAML –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—é –≤ docstring —Ñ—É–Ω–∫—Ü—ñ—ó:

```python
@app.route('/api/new-endpoint')
def new_endpoint():
    """
    –û–ø–∏—Å –µ–Ω–¥–ø–æ—ñ–Ω—Ç—É.
    ---
    tags:
      - Category Name
    parameters:
      - name: param
        in: query
        type: string
        description: –û–ø–∏—Å –ø–∞—Ä–∞–º–µ—Ç—Ä–∞
    responses:
      200:
        description: –£—Å–ø—ñ—à–Ω–∞ –≤—ñ–¥–ø–æ–≤—ñ–¥—å
        schema:
          type: object
          properties:
            field:
              type: string
    """
    return jsonify({'status': 'ok'})
```

## –ü—ñ–¥—Ç—Ä–∏–º–∫–∞

–Ø–∫—â–æ –≤–∏–Ω–∏–∫–ª–∏ –ø–∏—Ç–∞–Ω–Ω—è –∞–±–æ –ø—Ä–æ–±–ª–µ–º–∏ –∑ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü—ñ—î—é, –ø–µ—Ä–µ–≤—ñ—Ä—Ç–µ:
1. –ß–∏ –∑–∞–ø—É—â–µ–Ω–∏–π —Å–µ—Ä–≤–µ—Ä
2. –ß–∏ –≤—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–æ –≤—Å—ñ –∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ (`pip install -r requirements.txt`)
3. –ß–∏ –Ω–µ–º–∞—î –ø–æ–º–∏–ª–æ–∫ —É –∫–æ–Ω—Å–æ–ª—ñ —Å–µ—Ä–≤–µ—Ä–∞


