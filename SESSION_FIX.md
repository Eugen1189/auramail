# üîß –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è –ø—Ä–æ–±–ª–µ–º–∏ –∑ —Å–µ—Å—ñ—è–º–∏ (–ø–æ–≤—Ç–æ—Ä–Ω–∞ –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—è)

## –ü—Ä–æ–±–ª–µ–º–∞

–ü—ñ—Å–ª—è —É—Å–ø—ñ—à–Ω–æ—ó OAuth –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á –ø–æ–≤–µ—Ä—Ç–∞—î—Ç—å—Å—è –Ω–∞–∑–∞–¥ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó –∑–∞–º—ñ—Å—Ç—å dashboard. –¶–µ –æ–∑–Ω–∞—á–∞—î, —â–æ —Å–µ—Å—ñ—è –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –º—ñ–∂ –∑–∞–ø–∏—Ç–∞–º–∏.

## –ü—Ä–∏—á–∏–Ω–∏

1. **Session –Ω–µ permanent** - Flask —Å–µ—Å—ñ—ó –Ω–µ –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω—ñ –∑–∞ –∑–∞–º–æ–≤—á—É–≤–∞–Ω–Ω—è–º
2. **–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ñ cookie –Ω–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è** - cookies –º–æ–∂—É—Ç—å –Ω–µ –∑–±–µ—Ä—ñ–≥–∞—Ç–∏—Å—è —á–µ—Ä–µ–∑ HTTPS/secure settings
3. **FLASK_SECRET_KEY –º–æ–∂–µ –±—É—Ç–∏ None –∞–±–æ –∑–º—ñ–Ω—é–≤–∞—Ç–∏—Å—è**

## –í–∏–ø—Ä–∞–≤–ª–µ–Ω–Ω—è

### 1. –ù–∞–ª–∞—à—Ç—É–≤–∞–Ω–Ω—è —Å–µ—Å—ñ—ó –≤ `app_factory.py`

–î–æ–¥–∞–Ω–æ –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—é —Å–µ—Å—ñ–π:
```python
app.config['SESSION_PERMANENT'] = True
app.config['PERMANENT_SESSION_LIFETIME'] = 86400  # 24 hours
app.config['SESSION_COOKIE_SECURE'] = FORCE_HTTPS and not DEBUG
app.config['SESSION_COOKIE_HTTPONLY'] = True
app.config['SESSION_COOKIE_SAMESITE'] = 'Lax'
```

### 2. –í—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—è `session.permanent = True` –≤ –º–∞—Ä—à—Ä—É—Ç–∞—Ö

–í `/authorize` —Ç–∞ `/callback` –¥–æ–¥–∞–Ω–æ:
```python
session.permanent = True
```

–¶–µ –≥–∞—Ä–∞–Ω—Ç—É—î, —â–æ —Å–µ—Å—ñ—è –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è –ø—ñ–¥ —á–∞—Å OAuth redirect.

## –ü–µ—Ä–µ–≤—ñ—Ä–∫–∞

1. –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç—ñ—Ç—å —Å–µ—Ä–≤–µ—Ä:
   ```powershell
   python server.py
   ```

2. –°–ø—Ä–æ–±—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è –∑–Ω–æ–≤—É

3. –ü—ñ—Å–ª—è callback –≤–∏ –º–∞—î—Ç–µ –ø–æ—Ç—Ä–∞–ø–∏—Ç–∏ –Ω–∞ dashboard, –∞ –Ω–µ –Ω–∞ —Å—Ç–æ—Ä—ñ–Ω–∫—É –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü—ñ—ó

## –Ø–∫—â–æ –ø—Ä–æ–±–ª–µ–º–∞ –∑–∞–ª–∏—à–∞—î—Ç—å—Å—è

### –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ FLASK_SECRET_KEY

–ü–µ—Ä–µ–∫–æ–Ω–∞–π—Ç–µ—Å—è, —â–æ `.env` —Ñ–∞–π–ª –º—ñ—Å—Ç–∏—Ç—å –≤–∞–ª—ñ–¥–Ω–∏–π `FLASK_SECRET_KEY`:

```env
FLASK_SECRET_KEY=–≤–∞—à_–∫–ª—é—á_—Ç—É—Ç
```

–Ø–∫—â–æ –∫–ª—é—á–∞ –Ω–µ–º–∞—î, –∑–∞–ø—É—Å—Ç—ñ—Ç—å:
```powershell
python create_env.py
```

### –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ cookies –≤ –±—Ä–∞—É–∑–µ—Ä—ñ

1. –í—ñ–¥–∫—Ä–∏–π—Ç–µ Developer Tools (F12)
2. –ü–µ—Ä–µ–π–¥—ñ—Ç—å –Ω–∞ –≤–∫–ª–∞–¥–∫—É Application/Storage ‚Üí Cookies
3. –ü–µ—Ä–µ–≤—ñ—Ä—Ç–µ, —á–∏ –∑–±–µ—Ä—ñ–≥–∞—î—Ç—å—Å—è cookie `session` –∑ –¥–æ–º–µ–Ω–æ–º `127.0.0.1`

### –û—á–∏—Å—Ç—ñ—Ç—å cookies

–Ø–∫—â–æ —Å—Ç–∞—Ä—ñ cookies –∫–æ–Ω—Ñ–ª—ñ–∫—Ç—É—é—Ç—å:
1. –û—á–∏—Å—Ç—ñ—Ç—å cookies –¥–ª—è `127.0.0.1` –≤ –±—Ä–∞—É–∑–µ—Ä—ñ
2. –°–ø—Ä–æ–±—É–π—Ç–µ –∞–≤—Ç–æ—Ä–∏–∑—É–≤–∞—Ç–∏—Å—è –∑–Ω–æ–≤—É

## –¢–µ—Ö–Ω—ñ—á–Ω—ñ –¥–µ—Ç–∞–ª—ñ

- `SESSION_COOKIE_SAMESITE='Lax'` –¥–æ–∑–≤–æ–ª—è—î cookies –ø—Ä–∏ redirect –∑ Google OAuth
- `SESSION_COOKIE_SECURE=False` –¥–ª—è development (self-signed cert)
- `SESSION_COOKIE_SECURE=True` –¥–ª—è production (—Ä–µ–∞–ª—å–Ω–∏–π HTTPS)
- `session.permanent = True` —Ä–æ–±–∏—Ç—å —Å–µ—Å—ñ—é –ø–µ—Ä—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—é

